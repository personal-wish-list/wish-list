(this["webpackJsonpmern-client"]=this["webpackJsonpmern-client"]||[]).push([[0],{52:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var i=n(2),c=n.n(i),s=n(27),a=n.n(s),r=(n(52),n(19)),l=n(6),o=n(74),j=n(45),u=n(18),b=n.n(u),d=n(10),O=n(22),h=(n(54),n(23)),m=n(4),p=n(15),f=(n(55),n(8));function x(e,t,n){return new Promise((function(i,c){var s,a,r,l=window.indexedDB.open("wish-list",1);l.onupgradeneeded=function(e){var t=l.result;t.createObjectStore("wishlist",{keyPath:"_id"}),t.createObjectStore("secret list",{keyPath:"_id"}),t.createObjectStore("shopping list",{keyPath:"_id"})},l.onerror=function(e){console.log("There was an error"),console.error(e)},l.onsuccess=function(c){switch(s=l.result,a=s.transaction(e,"readwrite"),r=a.objectStore(e),s.onerror=function(e){console.log("error",e)},t){case"put":r.put(n),i(n);break;case"get":var o=r.getAll();o.onsuccess=function(){i(o.result)};break;case"delete":r.delete(n._id);break;default:console.log("No valid method")}a.oncomplete=function(){s.close()}}}))}var v="ADD_TO_WISHLIST",g="ADD_MULTIPLE_TO_WISHLIST",w="SORT_WISHLIST_ALPHABETICALLY",_="SORT_WISHLIST_PRICE_ASC",S="SORT_WISHLIST_PRICE_DESC",N="UPDATE_WISHLIST_ITEM",L="REMOVE_FROM_WISHLIST",y="ADD_TO_SECRET_LIST",k="ADD_MULTIPLE_TO_SECRET_LIST",C="UPDATE_SECRET_LIST_ITEM",T="REMOVE_FROM_SECRET_LIST",E="ADD_TO_SHOPPING_LIST",I="ADD_MULTIPLE_TO_SHOPPING_LIST",P="UPDATE_SHOPPING_LIST_ITEM",D="REMOVE_FROM_SHOPPING_LIST",F=n(0),A=function(){var e=Object(f.b)(),t=Object(i.useState)({_id:"",name:"",link:"",price:"",specialNote:"",isClaimed:!1,isClaimedBy:""}),n=Object(p.a)(t,2),c=n[0],s=n[1],a=c._id,r=c.name,l=c.link,o=c.price,j=c.specialNote,u=c.isClaimed,b=c.isClaimedBy,d=function(e){s(Object(m.a)(Object(m.a)({},c),{},Object(h.a)({},e.target.name,e.target.value)))};return Object(F.jsxs)("section",{children:[Object(F.jsx)("h2",{children:"Add an Item"}),Object(F.jsxs)("form",{id:"add-item-form",onSubmit:function(t){t.preventDefault(),console.log(c),e({type:v,item:Object(m.a)({},c)}),x("wishlist","put",Object(m.a)(Object(m.a)({},c),{},{isClaimed:u,isClaimedBy:b})),e({type:y,item:Object(m.a)({},c)}),x("secret list","put",Object(m.a)(Object(m.a)({},c),{},{isClaimed:u,isClaimedBy:b}))},children:[Object(F.jsxs)("div",{className:"form-input",children:[Object(F.jsx)("label",{htmlFor:"_id",children:"ID:"}),Object(F.jsx)("input",{type:"text",name:"_id",defaultValue:a,onBlur:d})]}),Object(F.jsxs)("div",{className:"form-input",children:[Object(F.jsx)("label",{htmlFor:"name",children:"Name:"}),Object(F.jsx)("input",{type:"text",name:"name",defaultValue:r,onBlur:d})]}),Object(F.jsxs)("div",{className:"form-input",children:[Object(F.jsx)("label",{htmlFor:"link",children:"Link:"}),Object(F.jsx)("input",{type:"text",name:"link",defaultValue:l,onBlur:d})]}),Object(F.jsxs)("div",{className:"form-input",children:[Object(F.jsx)("label",{htmlFor:"price",children:"Price: $"}),Object(F.jsx)("input",{type:"number",name:"price",defaultValue:"$".concat(o),onBlur:d})]}),Object(F.jsxs)("div",{className:"form-input",children:[Object(F.jsx)("label",{htmlFor:"specialNote",children:"Special Notes:"}),Object(F.jsx)("textarea",{name:"specialNote",rows:"5",defaultValue:j,onBlur:d})]}),Object(F.jsx)("button",{type:"submit","data-testid":"submit",children:"Submit"})]})]})},B=n(26),R=n.n(B);n(61);function M(e){return e.replace("http://","").replace("https://","").replace("www.","").split("/")[0].split("?")[0]}var W=function(e){var t=e.item,n=t,c=n._id,s=n.name,a=n.price,r=n.link,l=n.specialNote,o=Object(i.useState)(!1),j=Object(p.a)(o,2),u=j[0],b=j[1],d=Object(f.c)((function(e){return e})),O=d.wishlist,v=d.secretList,g=d.shoppingList,w=Object(f.b)(),_=function(e){var n=e.currentTarget.dataset.column,i=e.target.value;t=Object(m.a)(Object(m.a)({},t),{},Object(h.a)({},n,i))},S=function(e){var t=O.find((function(t){return t._id===e})),n=g.find((function(t){return t._id===e}));t&&(w({type:L,item:Object(m.a)({},t)}),x("wishlist","delete",Object(m.a)({},t)),w({type:T,item:Object(m.a)({},t)}),x("secret list","delete",Object(m.a)({},t))),n&&(w({type:D,item:Object(m.a)({},n)}),x("shopping list","delete",Object(m.a)({},n))),console.log("".concat(s," deleted!"))};return u?Object(F.jsx)("div",{className:"container",children:Object(F.jsxs)("div",{className:"wishlist-item",children:[Object(F.jsx)("strong",{children:Object(F.jsx)(R.a,{html:s,"data-column":"name",className:"content-editable",onChange:_})}),Object(F.jsx)("strong",{children:Object(F.jsxs)("span",{children:["$",Object(F.jsx)(R.a,{html:"".concat(a),"data-column":"price",className:"content-editable",onChange:_})]})}),Object(F.jsx)(R.a,{html:r,"data-column":"link",className:"content-editable",onChange:_}),Object(F.jsx)(R.a,{html:l,"data-column":"specialNote",className:"content-editable",onChange:_}),Object(F.jsxs)("div",{children:[Object(F.jsx)("button",{onClick:function(){return function(e){var n=O.find((function(t){return t._id===e})),i=v.find((function(t){return t._id===e})),c=g.find((function(t){return t._id===e}));n&&(w({type:N,item:Object(m.a)({},t)}),x("wishlist","put",Object(m.a)({},t))),i&&(w({type:C,item:Object(m.a)({},t)}),x("secret list","put",Object(m.a)({},t))),c&&(w({type:P,item:Object(m.a)({},t)}),x("shopping list","put",Object(m.a)({},t))),b(!1)}(c)},children:"Save"}),Object(F.jsx)("button",{onClick:function(){return S(c)},children:"Delete"})]})]})}):Object(F.jsx)("div",{className:"container",children:Object(F.jsxs)("div",{className:"wishlist-item",children:[Object(F.jsx)("h3",{children:s}),Object(F.jsxs)("h4",{children:["$",a]}),Object(F.jsx)("a",{href:r,target:"_blank",rel:"noreferrer",className:"item-link",children:M(r)}),Object(F.jsx)("p",{children:l}),Object(F.jsxs)("div",{children:[Object(F.jsx)("button",{onClick:function(){console.log("editing ".concat(s,"...")),b(!0)},children:"Edit"}),Object(F.jsx)("button",{onClick:function(){return S(c)},children:"Delete"})]})]})})},H=function(){var e=Object(f.c)((function(e){return e})),t=Object(f.b)();Object(i.useEffect)((function(){var n=function(){var e=Object(O.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("wishlist","get");case 2:n=e.sent,t({type:g,items:Object(d.a)(n)});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e.wishlist.length||n()}),[e.wishlist.length,t]);return Object(F.jsxs)("div",{className:"container",children:[Object(F.jsx)("h2",{className:"text-green",children:"Wishlist"}),Object(F.jsx)(A,{}),e.wishlist.length?Object(F.jsxs)("div",{children:[Object(F.jsx)("button",{onClick:function(){e.wishlist.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})),t({type:w,wishlist:[e.wishlist]})},children:"Sort Alphabetically"}),Object(F.jsx)("button",{onClick:function(){e.wishlist.sort((function(e,t){return parseFloat(e.price)-parseFloat(t.price)})),t({type:_,wishlist:[e.wishlist]})},children:"Sort Price Asc"}),Object(F.jsx)("button",{onClick:function(){e.wishlist.sort((function(e,t){return parseFloat(t.price)-parseFloat(e.price)})),t({type:S,wishlist:[e.wishlist]})},children:"Sort Price Desc"}),e.wishlist.map((function(e){return Object(F.jsx)(W,{item:e},e._id)}))]}):Object(F.jsxs)("div",{children:[Object(F.jsx)("span",{role:"img","aria-label":"gift",children:"\ud83c\udf81"}),"Add items to your wishlist if you want gifts"]})]})},U=(n(62),n(63),function(e){var t=e.item,n=Object(f.c)((function(e){return e})).shoppingList,i=Object(f.b)(),c=t._id,s=t.name,a=t.price,r=t.link,l=t.specialNote,o=t.isClaimed,j=t.isClaimedBy;return Object(F.jsx)("div",{className:"container",children:Object(F.jsxs)("div",{className:"secret-list-item",children:[Object(F.jsxs)("h3",{children:[s,Object(F.jsxs)("span",{children:[" $",a]})]}),Object(F.jsx)("a",{href:r,children:M(r)}),Object(F.jsx)("p",{children:l}),o?Object(F.jsxs)("div",{children:["Claimed by: ",j]}):Object(F.jsx)("div",{children:Object(F.jsx)("button",{id:"claim-gift",onClick:function(){n.find((function(e){return e._id===c}))||(o=!0,j="Me",i({type:E,item:Object(m.a)(Object(m.a)({},t),{},{isClaimed:o,isClaimedBy:j})}),x("shopping list","put",Object(m.a)(Object(m.a)({},t),{},{isClaimed:o,isClaimedBy:j})),i({type:C,item:Object(m.a)(Object(m.a)({},t),{},{isClaimed:o,isClaimedBy:j})}),x("secret list","put",Object(m.a)(Object(m.a)({},t),{},{isClaimed:o,isClaimedBy:j})))},children:"Claim Gift"})})]})})}),V=function(){var e=Object(f.c)((function(e){return e.secretList})),t=Object(f.b)(),n=Object(i.useState)(e),c=Object(p.a)(n,2),s=c[0],a=c[1],r=Object(i.useState)(!1),l=Object(p.a)(r,2),o=l[0],j=l[1],u=Object(i.useState)(0),h=Object(p.a)(u,2),m=h[0],v=h[1],g=Object(i.useState)(500),w=Object(p.a)(g,2),_=w[0],S=w[1];Object(i.useEffect)((function(){var n=function(){var e=Object(O.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("secret list","get");case 2:n=e.sent,t({type:k,items:Object(d.a)(n)});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e.length||n()}),[e.length,t]);var N=function(t){a(e),j(!0);var n=t.currentTarget.dataset.column,i=t.target.value;"minPrice"===n&&v(parseInt(i)),"maxPrice"===n&&S(parseInt(i));var c=e.filter((function(e){return e.price>=m&&e.price<=_}));a(c)},L=function(){var t=Object(O.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:j(!0),a(e),console.log(s),a(e.filter((function(e){return e.price>=m&&e.price<=_}))),console.log(s),n=s[Math.floor(Math.random()*s.length)],console.log(n),a([n]);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(F.jsxs)("div",{className:"container",children:[Object(F.jsx)("h2",{className:"text-green",children:"Secret List"}),Object(F.jsxs)("div",{children:[Object(F.jsx)("label",{htmlFor:"minPrice",children:"Min Price: $"}),Object(F.jsx)("input",{type:"number",min:"0",max:_,name:"minPrice","data-column":"minPrice",value:m,onChange:N,onFocus:N,onBlur:N})]}),Object(F.jsxs)("div",{children:[Object(F.jsx)("label",{htmlFor:"maxPrice",children:"Max Price: $"}),Object(F.jsx)("input",{type:"number",min:m,name:"maxPrice","data-column":"maxPrice",value:_,onChange:N,onFocus:N,onBlur:N})]}),Object(F.jsx)("button",{onClick:function(){j(!1),v(0),S(100),a(e)},children:"Clear Filters"}),Object(F.jsx)("button",{onClick:function(){L()},children:"Select Random Gift!"}),o?Object(F.jsx)("div",{children:s.map((function(e){return Object(F.jsx)(U,{item:e},e._id)}))}):Object(F.jsx)("div",{children:e.length?Object(F.jsx)("div",{children:e.map((function(e){return Object(F.jsx)(U,{item:e},e._id)}))}):Object(F.jsxs)("div",{children:["This user has everything they want!",Object(F.jsx)("span",{role:"img","aria-label":"smiley",children:"\ud83d\ude03"})]})})]})},$=(n(64),n(65),function(e){var t=e.item,n=t.name,i=t.price,c=t.link,s=t.specialNote;return Object(F.jsx)("div",{className:"container",children:Object(F.jsxs)("div",{className:"wishlist-item",children:[Object(F.jsxs)("h3",{children:[n,Object(F.jsxs)("span",{children:[" $",i]})]}),Object(F.jsx)("a",{href:c,children:M(c)}),Object(F.jsx)("p",{children:s})]})})}),G=function(){var e=Object(f.c)((function(e){return e})),t=Object(f.b)();return Object(i.useEffect)((function(){var n=function(){var e=Object(O.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("shopping list","get");case 2:n=e.sent,t({type:I,items:Object(d.a)(n)});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e.shoppingList.length||n()}),[e.shoppingList.length,t]),Object(F.jsxs)("div",{className:"container",children:[Object(F.jsx)("h2",{className:"text-green",children:"Shopping List"}),e.shoppingList.length?Object(F.jsx)("div",{children:e.shoppingList.map((function(e){return Object(F.jsx)($,{item:e},e._id)}))}):Object(F.jsxs)("div",{children:[Object(F.jsx)("span",{role:"img","aria-label":"relief",children:"\ud83d\ude0c"}),"Feels good to have the shopping done..."]})]})},X=function(){return Object(F.jsxs)("div",{className:"container",children:[Object(F.jsx)(H,{}),Object(F.jsx)(V,{}),Object(F.jsx)(G,{})]})},z=n(46),q={wishlist:[],secretList:[],shoppingList:[]},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(m.a)(Object(m.a)({},e),{},{wishlist:[].concat(Object(d.a)(e.wishlist),[t.item])});case g:return Object(m.a)(Object(m.a)({},e),{},{wishlist:[].concat(Object(d.a)(e.wishlist),Object(d.a)(t.items))});case w:var n=e.wishlist.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}));return Object(m.a)(Object(m.a)({},e),{},{wishlist:n});case _:var i=e.wishlist.sort((function(e,t){return parseFloat(e.price)-parseFloat(t.price)}));return Object(m.a)(Object(m.a)({},e),{},{wishlist:i});case S:var c=e.wishlist.sort((function(e,t){return parseFloat(t.price)-parseFloat(e.price)}));return Object(m.a)(Object(m.a)({},e),{},{wishlist:c});case N:return Object(m.a)(Object(m.a)({},e),{},{wishlist:[].concat(Object(d.a)(e.wishlist),[t.item])});case L:var s=e.wishlist.filter((function(e){return e._id!==t._id}));return Object(m.a)(Object(m.a)({},e),{},{wishlist:s});case y:return Object(m.a)(Object(m.a)({},e),{},{secretList:[].concat(Object(d.a)(e.secretList),[t.item])});case k:return Object(m.a)(Object(m.a)({},e),{},{secretList:Object(d.a)(t.items)});case C:return Object(m.a)(Object(m.a)({},e),{},{secretList:[].concat(Object(d.a)(e.secretList),[t.item])});case T:var a=e.secretList.filter((function(e){return e._id!==t._id}));return Object(m.a)(Object(m.a)({},e),{},{secretList:a});case E:return Object(m.a)(Object(m.a)({},e),{},{shoppingList:[].concat(Object(d.a)(e.shoppingList),[t.item])});case I:return Object(m.a)(Object(m.a)({},e),{},{shoppingList:[].concat(Object(d.a)(e.shoppingList),Object(d.a)(t.items))});case P:return Object(m.a)(Object(m.a)({},e),{},{shoppingList:[].concat(Object(d.a)(e.shoppingList),[t.item])});case D:var r=e.shoppingList.filter((function(e){return e._id!==t._id}));return Object(m.a)(Object(m.a)({},e),{},{shoppingList:r});default:return e}},Y=Object(z.a)(J,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),K=(n(66),n(67),["btn--primary","btn--outline","btn--test"]),Q=["btn--medium","btn--large"],Z=function(e){var t=e.children,n=e.type,i=e.onClick,c=e.buttonStyle,s=e.buttonSize,a=K.includes(c)?c:K[0],l=Q.includes(s)?s:Q[0];return Object(F.jsx)(r.b,{to:"/sign-up",className:"btn-mobile",children:Object(F.jsx)("button",{className:"btn ".concat(a," ").concat(l),onClick:i,type:n,children:t})})};var ee=function(){var e=Object(i.useState)(!1),t=Object(p.a)(e,2),n=t[0],c=t[1],s=Object(i.useState)(!0),a=Object(p.a)(s,2),l=a[0],o=a[1],j=function(){return c(!1)},u=function(){window.innerWidth<=960?o(!1):o(!0)};return Object(i.useEffect)((function(){u()}),[]),window.addEventListener("resize",u),Object(F.jsx)(F.Fragment,{children:Object(F.jsx)("nav",{className:"navbar",children:Object(F.jsxs)("div",{className:"navbar-container",children:[Object(F.jsxs)(r.b,{to:"/",className:"navbar-logo",onClick:j,children:["Wish-List \xa0",Object(F.jsx)("i",{class:"fas fa-gift"})]}),Object(F.jsx)("div",{className:"menu-icon",onClick:function(){return c(!n)},children:Object(F.jsx)("i",{className:n?"fas fa-times":"fas fa-bars"})}),Object(F.jsxs)("ul",{className:n?"nav-menu active":"nav-menu",children:[Object(F.jsx)("li",{className:"nav-item",children:Object(F.jsx)(r.b,{to:"/",className:"nav-links",onClick:j,children:"Home"})}),Object(F.jsx)("li",{className:"nav-item",children:Object(F.jsx)(r.b,{to:"/dashboard",className:"nav-links",onClick:j,children:"Dashboard"})}),Object(F.jsx)("li",{className:"nav-item",children:Object(F.jsx)(r.b,{to:"/sign-up",className:"nav-links-mobile",onClick:j,children:"Sign-Up"})})]}),l&&Object(F.jsx)(Z,{buttonStyle:"btn--outline",children:" SIGNUP "})]})})})},te=new j.a({request:function(e){var t=localStorage.getItem("id_token");e.setContext({headers:{authorization:t?"Bearer ".concat(t):""}})},uri:"/graphql"});var ne=function(){return Object(F.jsx)(o.a,{client:te,children:Object(F.jsx)(r.a,{children:Object(F.jsx)("div",{children:Object(F.jsxs)(f.a,{store:Y,children:[Object(F.jsx)(ee,{}),Object(F.jsx)(l.c,{children:Object(F.jsx)(l.a,{exact:!0,path:"/",component:X})})]})})})})},ie=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ce(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a.a.render(Object(F.jsx)(c.a.StrictMode,{children:Object(F.jsx)(ne,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ie?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var i=n.headers.get("content-type");404===n.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ce(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ce(t,e)}))}}()}},[[71,1,2]]]);
//# sourceMappingURL=main.b83004b1.chunk.js.map